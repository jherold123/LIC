<!doctype html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Latest compiled and minified CSS for Bootstrap framework -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

</head>

<body>
<div class="container">

        <br><br>

        <div id="view-select">
            <button class="btn btn-default" id="show-students">Students</button>
            <button class="btn btn-default" id="show-docs">Doctors</button>
        </div>

        <br><br>

        <div id="students" class="hidden">
            <div class="panel-group" id="accordionStu" role="tablist" aria-multiselectable="true"></div>
        </div>

        <div id="doctors" class="hidden">
        </div>


</div>


    <!-- jQuery CDN -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>

    <!-- Latest compiled and minified Bootstrap JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script>

        //Student function creates an object similar to our model of a student in the database

        function Student(){

            this.id = Math.floor((Math.random() * 100000) + 1);
            this.Name = "John Doe" + Math.floor((Math.random() * 100) + 1);
            this.email = "jdoe" + this.id + "@something.com";
            this.clerkships = [];

        }

        function Clerkship(std, doc, time){

            this.id = Math.floor((Math.random() * 100000) + 1);
            this.std = std;
            this.doc = doc;
            this.time = time;

        }

        function Doctor(){

            this.id = Math.floor((Math.random() * 100000) + 1);
            this.name = "Doctor Smith" + Math.floor((Math.random() * 1000) + 1);
            this.email = "dsmith" + this.id + "@doctor.com" ;
            this.clerkship;
            this.profession = "some profession";

        }

        var students = [];
        var doctors = [];
        var clerkships = [];
        var pages;


        for( var i = 0; i<60; i++){

            var std = new Student();

            for( var j = 0; j<8; j++){

                var doc = new Doctor();
                var clerk = new Clerkship(std, doc, "some day and time");

                std.clerkships.push(clerk);
                doc.clerkship = clerk;

                doctors.push(doc);
                clerkships.push(clerk);

            }

            students.push(std);
        }

        for( var i = 0; i<students.length; i++){
            console.log(students[i]);

            $("#accordionStu").append(

                "<\div class=\"panel panel-default\">" + "<\div class=\"panel-heading\" role=\"tab\" id=\"heading" + students[i].id + "\">" +
                "<\h4 class=\"panel-title\">" +
                "<\a role=\"button\" data-toggle=\"collapse\" data-parent=\"#accordionStu\" href=\"#" + students[i].id + "\" aria-expanded=\"true\" aria-controls=\"collapseOne\">" +
                students[i].Name +
                "<\/a>" +
                "<\/h4>" +
                "<\/div>" +
                "<\div id=\"" + students[i].id + "\" class=\"panel-collapse collapse\" role=\"tabpanel\" aria-labelledby=\"heading" + students[i].id + "\">" +
                "<\div class=\"panel-body\">" +
                "ID: " + students[i].id +  "<\/br> Email: " + students[i].email + "<\/br>" + clerksToString(students[i]) +
                "<button class=\"btn btn-default\"> Edit  </button>" +
                "<\/div>" +
                "<\/div>" +
                "<\/div>");

        }

        function createPagination(){

            pages = doctors.length/60;

            for( var i = 0; i<pages; i++){
                $("#doctors").append("<\div id=\"page"+i+"\" class=\"hidden pagination-check\">" +
                        "<div class=\"panel-group\" id=\"accordion" + i + "\" role=\"tablist\" aria-multiselectable=\"true\"></div>" +
                    "</div>");
            }

            $("#doctors").append("<div class=\"btn-group\" id=\"pag-group\">");

            for( var i = 0; i<pages; i++){
                $("#pag-group").append("<button type=\"button\" class=\"btn btn-primary\" id=pag" + i + ">" + (i+1) + "</button>");
            }

            $("#doctors").append("</div");

        }

        createPagination();

        var count = 0;
        for( var i = 0; i<doctors.length; i++){
            console.log(doctors[i]);

            $("#accordion" + count).append(

                "<\div class=\"panel panel-default\">" + "<\div class=\"panel-heading\" role=\"tab\" id=\"heading" + doctors[i].id + "\">" +
                "<\h4 class=\"panel-title\">" +
                "<\a role=\"button\" data-toggle=\"collapse\" data-parent=\"#accordion" + count + "\" href=\"#" + doctors[i].id + "\" aria-expanded=\"true\" aria-controls=\"collapseOne\">" +
                doctors[i].name +
                "<\/a>" +
                "<\/h4>" +
                "<\/div>" +
                "<\div id=\"" + doctors[i].id + "\" class=\"panel-collapse collapse\" role=\"tabpanel\" aria-labelledby=\"heading" + doctors[i].id + "\">" +
                "<\div class=\"panel-body\">" +
                "ID: " + doctors[i].id +  "<\/br> Email: " + doctors[i].email + "<\/br>" + "Profession: " + doctors[i].profession + " <br> Student: " + doctors[i].clerkship.std.Name + "<br>" +
                "<button class=\"btn btn-default\"> Edit  </button>" +
                "<\/div>" +
                "<\/div>" +
                "<\/div>");

            if( (i % 60) == 0 && i != 0){
                count++;
            }

        }


        function clerksToString(std){
            var clerks = "";
            for( var i = 0; i<8; i++){
                clerks = clerks + "" + std.clerkships[i].doc.profession + " with " + std.clerkships[i].doc.name + " at " + std.clerkships[i].time + "<\/br>";
            }
            return clerks;
        };


        $("button").click(function(){
            console.log("got a button click, check");
            var buttonClicked = this.id;
            console.log(buttonClicked);

            if( buttonClicked == "show-students"){
                $("#students").removeClass("hidden");
                $("#doctors").addClass("hidden");

            }
            if( buttonClicked == "show-docs"){
                $("#students").addClass("hidden");
                $("#doctors").removeClass("hidden");
            }
            for( var i = 0; i<pages; i++) {

                if (buttonClicked == ("pag" + i)) {
                    console.log("found this" + buttonClicked);
                    $("#page"+i).removeClass("hidden");
                }
                else{
                    $("#page"+i).addClass("hidden");

                }
            }


        });


    </script>


</body>
</html>

